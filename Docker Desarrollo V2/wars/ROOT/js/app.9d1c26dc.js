(()=>{"use strict";var e={538:(e,o,a)=>{var n=a(751),i=a(641),t=a(33);const s={class:"container mt-5"},r={class:"barramenu mb-4"},l={class:"margin_button d-flex justify-content-around"},c=["disabled"],d=["disabled"],p={class:"main-content"},b={key:0,class:"spinner"};function m(e,o,a,m,u,h){const f=(0,i.g2)("Paso1"),v=(0,i.g2)("Paso2"),k=(0,i.g2)("Paso3"),S=(0,i.g2)("Paso4");return(0,i.uX)(),(0,i.CE)("div",null,[o[6]||(o[6]=(0,i.Lk)("header",{class:"header text-center"},[(0,i.Lk)("div",{class:"container"},[(0,i.Lk)("h1",null,"Formulario de Varias Etapas")])],-1)),(0,i.Lk)("main",s,[(0,i.Lk)("div",r,[o[4]||(o[4]=(0,i.Lk)("p",null,"Mereth Aldaron Enyalië - Formulario de Inscripción",-1)),(0,i.Lk)("div",l,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=(...e)=>h.inicioGrupos&&h.inicioGrupos(...e)),disabled:u.isDisabled,style:(0,t.Tr)({cursor:u.isDisabled?"not-allowed":"pointer"})}," Inscripción General ",12,c),(0,i.Lk)("button",{class:"btn btn-secondary",onClick:o[1]||(o[1]=(...e)=>h.inicioIndividual&&h.inicioIndividual(...e)),disabled:u.isDisabled,style:(0,t.Tr)({cursor:u.isDisabled?"not-allowed":"pointer"})}," Inscripción Aleatoria ",12,d),(0,i.bo)((0,i.Lk)("button",{class:"btn btn-warning",onClick:o[2]||(o[2]=(...o)=>e.inicioListaEspera&&e.inicioListaEspera(...o))}," Apuntarse a la lista de espera ",512),[[n.aG,u.showListaEspera]]),(0,i.Lk)("button",{class:"btn btn-danger",onClick:o[3]||(o[3]=(...o)=>e.reiniciarProceso&&e.reiniciarProceso(...o))}," Reiniciar proceso ")])]),(0,i.Lk)("div",p,[u.isLoading?((0,i.uX)(),(0,i.CE)("div",b,o[5]||(o[5]=[(0,i.Fv)('<div class="spinner-container" data-v-677f4ce3><div class="spinner-circle" data-v-677f4ce3></div><div class="spinner-circle" data-v-677f4ce3></div><div class="spinner-circle" data-v-677f4ce3></div><div class="spinner-circle" data-v-677f4ce3></div></div><p data-v-677f4ce3>Buscando en el Pony Pisador...</p>',2)]))):(0,i.Q3)("",!0),1!==u.currentStep||u.isLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(f,{key:1,formData:u.formData,baseUrl:u.formData.baseUrl,onNextStep:h.handleNextStep,ref:"paso1Component"},null,8,["formData","baseUrl","onNextStep"])),2===u.currentStep?((0,i.uX)(),(0,i.Wv)(v,{key:2,currentStep:u.currentStep,formData:u.formData,baseUrl:e.baseUrl,mensaje:e.mensaje,onNextStep:h.handleNextStep,onPrevStep:h.handlePrevStep,ref:"paso2Component"},null,8,["currentStep","formData","baseUrl","mensaje","onNextStep","onPrevStep"])):(0,i.Q3)("",!0),2===u.currentStep?((0,i.uX)(),(0,i.Wv)(k,{key:3,currentStep:u.currentStep,formData:u.formData,baseUrl:e.baseUrl,mensaje:e.mensaje,onNextStep:h.handleNextStep,onPrevStep:h.handlePrevStep,ref:"paso3Component"},null,8,["currentStep","formData","baseUrl","mensaje","onNextStep","onPrevStep"])):(0,i.Q3)("",!0),4!==u.currentStep||u.isLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(S,{key:4,formData:u.formData,onPrevStep:h.handlePrevStep,onSubmitForm:e.handleSubmit},null,8,["formData","onPrevStep","onSubmitForm"]))])]),o[7]||(o[7]=(0,i.Lk)("footer",{class:"footer text-center mt-5"},[(0,i.Lk)("div",{class:"container"},[(0,i.Lk)("p",null,"© 2024 Formulario de Varias Etapas. Todos los derechos reservados.")])],-1))])}const u={class:"container"},h={class:"row"},f={class:"col-md-6"},v=["innerHTML"],k={key:0,class:"col-md-6"};function S(e,o,a,n,s,r){return(0,i.uX)(),(0,i.CE)("div",u,[o[4]||(o[4]=(0,i.Lk)("h2",{class:"mb-4"},"Paso 1",-1)),(0,i.Lk)("div",h,[(0,i.Lk)("div",f,[(0,i.Lk)("div",{ref:"paso1",innerHTML:s.comboHabitaciones},null,8,v),(0,i.Lk)("button",{class:"btn btn-primary mt-3",onClick:o[0]||(o[0]=(...e)=>r.nextStep&&r.nextStep(...e))},"Siguiente")]),s.selectedHabitacion?((0,i.uX)(),(0,i.CE)("div",k,[o[3]||(o[3]=(0,i.Lk)("h3",null,"Detalles de la Habitación Seleccionada",-1)),(0,i.Lk)("p",null,[o[1]||(o[1]=(0,i.Lk)("strong",null,"Capacidad:",-1)),(0,i.eW)(" "+(0,t.v_)(s.selectedHabitacion.capacidad),1)]),(0,i.Lk)("p",null,[o[2]||(o[2]=(0,i.Lk)("strong",null,"Camas:",-1)),(0,i.eW)(" "+(0,t.v_)(s.selectedHabitacion.camas),1)])])):(0,i.Q3)("",!0)])])}var g=a(335);const L={props:{formData:{type:Object,required:!0},baseUrl:{type:String,required:!0}},data(){return{comboHabitaciones:null,selectedHabitacion:null}},methods:{cargarComboPaso1(e){console.log("Cargando habitaciones desde:",this.baseUrl),g.A.get(`${this.baseUrl}/Valimar/GetComboHabitacionesDisponibles`).then((o=>{console.log("Respuesta del servidor (habitaciones):",o.data);const a=new DOMParser,n=a.parseFromString(o.data,"text/html"),i=n.querySelectorAll('input[type="button"]');i.forEach((e=>e.remove())),this.comboHabitaciones=n.body.innerHTML,e&&e()})).catch((e=>{console.error("Error al cargar el combo de habitaciones:",e.response||e.message)}))},handleSelection(e){const o=e.target.value;if(o.includes(",")){const[e,a]=o.split(",");this.selectedHabitacion={capacidad:e,camas:a}}else console.error("Formato inesperado para la opción seleccionada:",o)},nextStep(){const e=this.$refs.paso1.querySelector("select");if(e){const o=e.value;if(!o.includes(","))return void console.error("Formato de la opción seleccionada no válido:",o);const[a,n]=o.split(",");console.log("Capacidad seleccionada:",a),console.log("Camas seleccionadas:",n),this.$emit("nextStep",{comboHabitaciones:o,idhabitacion:this.selectedHabitacion.idhabitacion})}else console.error("El elemento <select> no está disponible.")}},mounted(){console.log("Montando el componente Paso1..."),this.cargarComboPaso1((()=>{this.$nextTick((()=>{const e=this.$refs.paso1.querySelector("select");e?e.addEventListener("change",this.handleSelection):console.error("No se encontró el elemento <select> después de cargar el combo.")}))}))}};var E=a(262);const C=(0,E.A)(L,[["render",S]]),D=C,P=["innerHTML"],y={key:1,class:"alert alert-warning",role:"alert"};function _(e,o,a,n,s,r){return(0,i.uX)(),(0,i.CE)(i.FK,null,[o[1]||(o[1]=(0,i.Lk)("h2",{class:"mb-4"},"Paso 2 - Bloqueo de Habitación",-1)),s.mensaje&&!s.error?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"alert alert-success",role:"alert",innerHTML:s.mensaje},null,8,P)):(0,i.Q3)("",!0),s.error?((0,i.uX)(),(0,i.CE)("div",y,(0,t.v_)(s.error),1)):(0,i.Q3)("",!0),s.habitacionBloqueada?((0,i.uX)(),(0,i.CE)("button",{key:2,class:"btn btn-primary mt-3",onClick:o[0]||(o[0]=(...e)=>r.nextStep&&r.nextStep(...e))}," Continuar al Paso 3 ")):(0,i.Q3)("",!0)],64)}const $={name:"Paso2",props:{currentStep:{type:Number,required:!0}},data(){return{mensaje:"",error:"",habitacionBloqueada:!1}},mounted(){this.mensaje="",this.error=""},methods:{nextStep(){console.log("Botón 'Continuar al Paso 3' clicado."),this.$emit("nextStep")},mostrarMensaje(e){e?(console.log("Mensaje recibido:",e),this.mensaje=e,this.error="",console.warn("LA HABITACIÓN HA SIDO BLOQUEADA"),this.habitacionBloqueada=!0,console.log("Habitación bloqueada:",this.habitacionBloqueada)):console.warn("El mensaje proporcionado está vacío o no es válido.")},mostrarError(e){e?(console.log("Error recibido:",e),this.error=e,this.mensaje="",this.habitacionBloqueada=!1,console.log("Habitación bloqueada:",this.habitacionBloqueada)):console.warn("El mensaje de error proporcionado está vacío o no es válido.")}},watch:{mensaje(e){e&&(console.log("Watcher detectó cambio en mensaje: ",e),this.habitacionBloqueada=!0)},error(e){e&&(console.log("Watcher detectó cambio en error: ",e),this.habitacionBloqueada=!1)}}},A=(0,E.A)($,[["render",_]]),I=A,O={key:0,class:"container"},H={id:"paso3Datos",class:"row"},x={class:"card mb-4"},U={class:"card-body"},j={class:"mb-3"},w=["for"],N=["id","onUpdate:modelValue"],V={class:"mb-3"},q=["for"],T=["id","onUpdate:modelValue"],B={class:"mb-3"},M=["for"],X=["id","onUpdate:modelValue"],F={class:"mb-3"},Q=["for"],R=["id","onUpdate:modelValue"],G={class:"mb-3"},W=["for"],J=["id","onUpdate:modelValue"],z={class:"mb-3"},K=["for"],Y=["id","onUpdate:modelValue"],Z={class:"form-check"},ee=["id","onUpdate:modelValue"],oe=["for"],ae={key:0,class:"mt-3"},ne=["id","onClick"],ie=["for"],te={key:0,class:"mt-2"},se=["id","onUpdate:modelValue"],re={key:1,class:"mt-3"},le=["id","onUpdate:modelValue"],ce=["for"],de=["disabled"];function pe(e,o,a,s,r,l){return(0,i.uX)(),(0,i.CE)("div",null,[3===e.currentStep?((0,i.uX)(),(0,i.CE)("div",O,[o[10]||(o[10]=(0,i.Lk)("p",null,"¡Estás en el paso 3!",-1)),(0,i.Lk)("div",H,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.inscritos,((e,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"col-12",key:a},[(0,i.Lk)("div",x,[(0,i.Lk)("div",U,[(0,i.Lk)("h2",null,"Datos del inscrito número "+(0,t.v_)(a+1),1),(0,i.Lk)("div",j,[(0,i.Lk)("label",{for:"nombre_"+a,class:"form-label"},"Nombre",8,w),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"nombre_"+a,class:"form-control","onUpdate:modelValue":o=>e.nombre=o,onInput:o[0]||(o[0]=(...e)=>l.disableEnviar&&l.disableEnviar(...e)),required:""},null,40,N),[[n.Jo,e.nombre]])]),(0,i.Lk)("div",V,[(0,i.Lk)("label",{for:"apellidos_"+a,class:"form-label"},"Apellidos",8,q),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"apellidos_"+a,class:"form-control","onUpdate:modelValue":o=>e.apellidos=o,onInput:o[1]||(o[1]=(...e)=>l.disableEnviar&&l.disableEnviar(...e)),required:""},null,40,T),[[n.Jo,e.apellidos]])]),(0,i.Lk)("div",B,[(0,i.Lk)("label",{for:"pseudonimo_"+a,class:"form-label"},"Pseudónimo (opcional)",8,M),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"pseudonimo_"+a,class:"form-control","onUpdate:modelValue":o=>e.pseudonimo=o,onInput:o[2]||(o[2]=(...e)=>l.disableEnviar&&l.disableEnviar(...e))},null,40,X),[[n.Jo,e.pseudonimo]])]),(0,i.Lk)("div",F,[(0,i.Lk)("label",{for:"email_"+a,class:"form-label"},"Email",8,Q),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email_"+a,class:"form-control","onUpdate:modelValue":o=>e.email=o,onInput:o[3]||(o[3]=(...e)=>l.disableEnviar&&l.disableEnviar(...e)),required:""},null,40,R),[[n.Jo,e.email]])]),(0,i.Lk)("div",G,[(0,i.Lk)("label",{for:"telefono_"+a,class:"form-label"},"Teléfono",8,W),(0,i.bo)((0,i.Lk)("input",{type:"tel",id:"telefono_"+a,class:"form-control","onUpdate:modelValue":o=>e.telefono=o,onInput:o[4]||(o[4]=(...e)=>l.disableEnviar&&l.disableEnviar(...e)),required:""},null,40,J),[[n.Jo,e.telefono]])]),(0,i.Lk)("div",z,[(0,i.Lk)("label",{for:"iden_"+a,class:"form-label"},"NIF/NIE/Pasaporte",8,K),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"iden_"+a,class:"form-control","onUpdate:modelValue":o=>e.nif=o,onInput:o[5]||(o[5]=(...e)=>l.disableEnviar&&l.disableEnviar(...e)),required:""},null,40,Y),[[n.Jo,e.nif]])]),(0,i.Lk)("div",Z,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"lopd_"+a,class:"form-check-input","onUpdate:modelValue":o=>e.aceptaCondiciones=o,onChange:o[6]||(o[6]=(...e)=>l.disableEnviar&&l.disableEnviar(...e))},null,40,ee),[[n.lH,e.aceptaCondiciones]]),(0,i.Lk)("label",{class:"form-check-label",for:"lopd_"+a},o[8]||(o[8]=[(0,i.eW)(" He leído y acepto las "),(0,i.Lk)("a",{href:"terminos.html",target:"_blank"},"condiciones de inscripción al evento",-1),(0,i.eW)(" (incluidas las referentes a uso de mi imagen) ")]),8,oe)]),0===a?((0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Lk)("input",{type:"checkbox",id:"con_bebes_"+a,onClick:e=>l.toggleBebe(a),class:"form-check-input"},null,8,ne),(0,i.Lk)("label",{for:"con_bebes_"+a,class:"form-check-label"}," Voy con menor/es de 2 años (no ocupan plaza) ",8,ie),r.showBebe[a]?((0,i.uX)(),(0,i.CE)("div",te,[(0,i.bo)((0,i.Lk)("select",{id:"fecha_bebe_"+a,class:"form-select","onUpdate:modelValue":o=>e.fechaBebe=o},o[9]||(o[9]=[(0,i.Lk)("option",{value:"0"},"(Año de nacimiento del menor)",-1),(0,i.Lk)("option",{value:"2022"},"2022",-1),(0,i.Lk)("option",{value:"2023"},"2023",-1),(0,i.Lk)("option",{value:"2024"},"2024",-1)]),8,se),[[n.u1,e.fechaBebe]])])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),a>0?((0,i.uX)(),(0,i.CE)("div",re,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"es_menor_"+a,"onUpdate:modelValue":o=>e.menor=o,class:"form-check-input"},null,8,le),[[n.lH,e.menor]]),(0,i.Lk)("label",{for:"es_menor_"+a,class:"form-check-label"}," Menor entre 2 y 12 años ",8,ce)])):(0,i.Q3)("",!0)])])])))),128))]),(0,i.Lk)("button",{class:"btn btn-primary",onClick:o[7]||(o[7]=(...e)=>l.nextStep&&l.nextStep(...e)),disabled:r.isEnviarDisabled},"Siguiente paso",8,de)])):(0,i.Q3)("",!0)])}const be={name:"Paso3",props:{formData:{type:Object,required:!0},baseUrl:{type:String,required:!0}},data(){return{isEnviarDisabled:!0,paso3Datos:"",inscritos:[],showBebe:[]}},methods:{prevStep(){this.$emit("prevStep")},validar(){const e=[];this.inscritos.forEach(((o,a)=>{o.nombre||e.push(`Nombre ${a+1} en blanco.`),o.apellidos||e.push(`Apellidos ${a+1} en blanco.`),o.email||e.push(`Email ${a+1} en blanco.`),o.telefono||e.push(`Teléfono ${a+1} en blanco.`),o.nif||o.menor||e.push(`NIF/NIE ${a+1} en blanco.`),o.aceptaCondiciones||e.push(`Debe aceptar las condiciones de inscripción para el inscrito ${a+1}.`)})),e.length>0?alert(e.join("\n")):this.isEnviarDisabled=!1},async enviarInscripcion(){try{const e=await fetch(`${this.baseUrl}/Valimar/RegistrarInscripcion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({habitacion:this.formData.idhabitacion,datos:this.inscritos})}),o=await e.text();document.getElementById("paso4").innerHTML=o}catch(e){console.error("Error al enviar la inscripción:",e),alert("Hubo un error al enviar la inscripción. Por favor, inténtalo de nuevo.")}},disableEnviar(){this.isEnviarDisabled=!0},toggleBebe(e){this.$set(this.showBebe,e,!this.showBebe[e])},toggleMenor(e){this.$set(this.inscritos[e],"menor",!this.inscritos[e].menor)},nextStep(){this.validar(),this.isEnviarDisabled||this.$emit("nextStep")}}},me=(0,E.A)(be,[["render",pe]]),ue=me;function he(e,o,a,n,t,s){return(0,i.uX)(),(0,i.CE)("div",null,[o[2]||(o[2]=(0,i.Lk)("h2",null,"Paso 4",-1)),o[3]||(o[3]=(0,i.Lk)("div",{id:"paso4"},null,-1)),(0,i.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>s.prevStep&&s.prevStep(...e))},"Anterior"),(0,i.Lk)("button",{onClick:o[1]||(o[1]=(...e)=>s.submitForm&&s.submitForm(...e))},"Enviar")])}var fe=a(692),ve=a.n(fe);const ke={props:["formData"],methods:{prevStep(){this.$emit("prevStep")},submitForm(){this.enviarInscripcion()},enviarInscripcion(){for(var e=this.formData.comboHabitaciones.split(",")[0],o=[],a=0;a<e;a++){var n={};n["iden"]=this.formData[`iden_${a+1}`],n["nombre"]=this.formData[`nombre_${a+1}`],n["apellidos"]=this.formData[`apellidos_${a+1}`],n["pseudonimo"]=this.formData[`pseudonimo_${a+1}`],n["email"]=this.formData[`email_${a+1}`],n["telefono"]=this.formData[`telefono_${a+1}`],n["lopd"]=this.formData[`lopd_${a+1}`],0==a?(n["menor"]=!1,n["con_bebes"]=this.formData[`fecha_bebe_${a+1}`]):(n["menor"]=this.formData[`es_menor_${a+1}`],n["con_bebes"]=0),o.push(n)}ve().ajax({url:"/Valimar/RegistrarInscripcion",type:"POST",data:"habitacion="+this.formData.idhabitacion+"&datos="+JSON.stringify(o),success:function(e,o){ve()("#paso3").hide(),ve()("#paso2").hide(),ve()("#paso4").show(),ve()("#paso4").html(e)}})}}},Se=(0,E.A)(ke,[["render",he]]),ge=Se,Le=["disabled"],Ee=["disabled"];function Ce(e,o,a,n,s,r){return a.visible?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,t.C4)({disabled:a.isDisabled})},[(0,i.RG)(e.$slots,"default",{},void 0,!0),(0,i.Lk)("button",{disabled:a.isDisabled,onClick:o[0]||(o[0]=(...e)=>r.validar&&r.validar(...e))},"Validar",8,Le),(0,i.Lk)("button",{disabled:a.isDisabled,onClick:o[1]||(o[1]=(...e)=>r.enviar&&r.enviar(...e))},"Enviar",8,Ee)],2)):(0,i.Q3)("",!0)}const De={props:{visible:Boolean,isDisabled:Boolean},methods:{validar(){this.$emit("validar")},enviar(){this.$emit("enviar")}}},Pe=(0,E.A)(De,[["render",Ce],["__scopeId","data-v-612bf9c6"]]),ye=Pe,_e={name:"App",components:{Paso1:D,Paso2:I,Paso3:ue,Paso4:ge,ControlComponent:ye},data(){return{currentStep:1,formData:{comboHabitaciones:"",idhabitacion:"",baseUrl:"http://127.0.0.1:8080",mensaje:""},isDisabled:!1,showListaEspera:!1,isLoading:!1,showInfo:!0,showPaso3:!1,showPaso3Individual:!1,showPaso3EsperaDatos:!1}},watch:{currentStep(e){console.log(`[WATCH] Cambio de paso: Paso ${e}`)}},methods:{handleNextStep(e){if(console.log("[NEXT STEP] Datos del paso siguiente recibidos:",e),this.formData={...this.formData,...e},console.log("Step ->"+this.currentStep),console.log("formData:",this.formData),1===this.currentStep)this.lanzarPaso2();else if(2===this.currentStep){console.log("[NEXT STEP] Avanzando al paso 3..."),console.log("comboHabitaciones:",this.formData.comboHabitaciones),console.log("idHabitacion:",this.formData.idhabitacion);const e=this.formData.comboHabitaciones?parseInt(this.formData.comboHabitaciones.split(",")[0],10):void 0,o=this.formData.idhabitacion;e&&o?this.generarPaso3(e,o):console.error("Faltan datos para generar los inscritos")}else this.currentStep<4&&this.currentStep++},handlePrevStep(){this.currentStep>1&&(console.log("[PREV STEP] Retrocediendo al paso anterior."),this.currentStep--)},inicioGrupos(){const e=confirm("Este tipo de inscripción es para habitaciones INDIVIDUALES NO COMPARTIDAS o GRUPOS COMPLETOS...");e&&(console.log("[INICIO GRUPOS] Iniciando inscripción general."),this.lanzarPaso1(),this.isDisabled=!0)},inicioIndividual(){const e=confirm("Este tipo de inscripción es para una inscripción individual en una habitación COMPARTIDA...");e&&(console.log("[INICIO INDIVIDUAL] Iniciando inscripción individual."),this.lanzarPaso1individual(),this.isDisabled=!0)},cargarComboPaso1(){console.log("[PASO 1] Solicitando habitaciones disponibles..."),this.isLoading=!0,g.A.get(`${this.formData.baseUrl}/Valimar/GetComboHabitacionesDisponibles`).then((e=>{console.log("[PASO 1] Habitaciones disponibles recibidas:",e.data);const o=this.$refs.paso1Component;o?(o.$refs.paso1.innerHTML=e.data,o.$refs.paso1.style.display="block"):console.error("[PASO 1] Componente Paso1 no encontrado.")})).catch((e=>{console.error("[PASO 1] Error al obtener habitaciones:",e)})).finally((()=>{this.isLoading=!1}))},lanzarPaso2(){console.log("[PASO 2] Iniciando solicitud para bloquear habitación..."),this.formData.comboHabitaciones?(this.currentStep=2,this.isLoading=!0,g.A.post(`${this.formData.baseUrl}/Valimar/BloquearHabitacion`,{capacidad:this.formData.comboHabitaciones.split(",")[0],camas:this.formData.comboHabitaciones.split(",")[1]}).then((e=>{console.log("[PASO 2] Respuesta recibida:",e.data);const o=this.$refs.paso2Component;if(console.log("[PASO 2] Comprobando valores:"),console.log("paso2Component:",o),console.log("response.data:",e.data),o&&e.data&&""!==e.data.trim()){this.formData.idhabitacion=e.data;const a=`\n          <div class="alert alert-info" role="alert">\n            <h4 class="alert-heading">Habitación Bloqueada</h4>\n            <p>Habitación bloqueada temporalmente: <strong>${e.data}</strong>.</p>\n            <hr>\n            <p class="mb-0">Dispone de 10 minutos para completar la reserva.</p>\n          </div>`;o.mostrarMensaje(a)}else console.warn("[PASO 2] No se pudo bloquear habitación o datos incompletos."),this.$refs.paso2Component&&"function"===typeof this.$refs.paso2Component.mostrarError?this.$refs.paso2Component.mostrarError("No se pudo bloquear la habitación. Inténtelo de nuevo."):console.error("[PASO 2] No se pudo encontrar el método mostrarError en el componente.")})).catch((e=>{console.error("[PASO 2] Error al bloquear habitación:",e),this.$refs.paso2Component&&"function"===typeof this.$refs.paso2Component.mostrarError&&this.$refs.paso2Component.mostrarError("Error al conectar con el servicio. Inténtelo más tarde.")}))):console.error("[PASO 2] comboHabitaciones está vacío. Abortando.")},generarPaso3(e,o){if(console.log(`[PASO 3] Generando paso 3 con capacidad: ${e}, idHabitacion: ${o}`),!e||!o)return void console.error(`[PASO 3] Datos incompletos. Capacidad: ${e}, idHabitacion: ${o}. Abandonando proceso.`);if(e=parseInt(e,10),isNaN(e))return void console.error(`[PASO 3] Capacidad no es un número válido: ${e}. Abandonando proceso.`);this.currentStep=3;const a=this.$refs.paso3Component;if(a){this.inscritos=[];for(let o=0;o<e;o++)console.log(`[PASO 3] Creamos usuario: ${o}`),Vue.set(this.inscritos,o,{nombre:"",apellidos:"",pseudonimo:"",email:"",telefono:"",nif:"",aceptaCondiciones:!1,menor:o>0,conBebes:0!==o&&null,fechaBebe:0===o?"":null});this.$nextTick((()=>{console.log("La vista debería haberse actualizado ahora para el paso 3.")}))}else console.error("[PASO 3] Referencia a paso3Component no encontrada.")}}},$e=(0,E.A)(_e,[["render",m],["__scopeId","data-v-677f4ce3"]]),Ae=$e;document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#app");console.log(e),e&&!e.__vue_app__?(console.log("Montando la aplicación..."),(0,n.Ef)(Ae).mount("#app")):console.log("La aplicación ya está montada.")}))}},o={};function a(n){var i=o[n];if(void 0!==i)return i.exports;var t=o[n]={exports:{}};return e[n].call(t.exports,t,t.exports,a),t.exports}a.m=e,(()=>{var e=[];a.O=(o,n,i,t)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,i,t]=e[d],r=!0,l=0;l<n.length;l++)(!1&t||s>=t)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(r=!1,t<s&&(s=t));if(r){e.splice(d--,1);var c=i();void 0!==c&&(o=c)}}return o}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[n,i,t]}})(),(()=>{a.n=e=>{var o=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(o,{a:o}),o}})(),(()=>{a.d=(e,o)=>{for(var n in o)a.o(o,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};a.O.j=o=>0===e[o];var o=(o,n)=>{var i,t,[s,r,l]=n,c=0;if(s.some((o=>0!==e[o]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var d=l(a)}for(o&&o(n);c<s.length;c++)t=s[c],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(d)},n=self["webpackChunkValimarFrontal"]=self["webpackChunkValimarFrontal"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))})();var n=a.O(void 0,[504],(()=>a(538)));n=a.O(n)})();
//# sourceMappingURL=app.9d1c26dc.js.map